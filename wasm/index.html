<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <p class="title">Web Assembly Example</p>

    <script>
      // WebAssembly.instantiateStreaming(fetch('./build/optimized.wasm'), {
      //   main: {
      //     sayHello() {
      //       console.log('Hello from WebAssembly!')
      //     },
      //   },
      //   env: {
      //     abort(_msg, _file, line, column) {
      //       console.error('abort called at main.ts:' + line + ':' + column)
      //     },
      //   },
      // })
      //   .then((result) => {
      //     const exports = result.instance.exports
      //     document.getElementById('container').textContent =
      //       'Result: ' + exports.add(19, 23)
      //   })
      //   .catch(console.error)
      fetch('./build/optimized.wasm')
        .then((response) => response.arrayBuffer())
        .then((bytes) =>
          WebAssembly.instantiate(
            bytes,
            // {
            //   main: {
            //     sayHello() {
            //       console.log('Hello from WebAssembly!')
            //     },
            //   },
            // env: {
            //   abort(_msg, _file, line, column) {
            //     console.error('abort called at main.ts:' + line + ':' + column)
            //   },
            // },
            // }
          ),
        )
        .then((obj) => {
          console.log(obj.instance.exports.add(19, 23))
        })
    </script>
    <p id="container"></p>
  </body>
</html>
